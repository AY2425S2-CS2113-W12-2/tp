@startuml FavoritesSequenceDiagram
!include Style.puml

actor User
participant ":Favorites" as Favorites

User -> Favorites : addFavorite(desc, rating, category)
activate Favorites
Favorites -> Favorites : formatItemString()
Favorites -> Favorites : addToFavoriteItems()
Favorites --> User : "✅ Added: [item]"
deactivate Favorites

User -> Favorites : viewFavorites()
activate Favorites
alt list is empty
    Favorites --> User : "No favorites yet."
else list not empty
    Favorites -> Favorites : formatListWithNumbers()
    Favorites --> User : "🌟 Your items:\n1. [item1]\n2. [item2]..."
end
deactivate Favorites

User -> Favorites : removeFavorite(index)
activate Favorites
alt invalid index
    Favorites --> User : "⚠️ Invalid index."
else valid index
    Favorites -> Favorites : removeFromList()
    Favorites -> Favorites : pushToUndoStack()
    Favorites --> User : "❌ Removed: [item]"
end
deactivate Favorites

User -> Favorites : undoRemove()
activate Favorites
alt stack empty
    Favorites --> User : "⚠️ No deletions to undo."
else stack not empty
    Favorites -> Favorites : popFromStack()
    Favorites -> Favorites : restoreToList()
    Favorites --> User : "🔄 Restored: [item]"
end
deactivate Favorites

User -> Favorites : sortFavorites(descending)
activate Favorites
Favorites -> Favorites : parseRatings()
Favorites -> Favorites : sortWithComparator()
Favorites --> User : "📊 Sorted in [order] order"
deactivate Favorites

User -> Favorites : searchFavorites(keyword)
activate Favorites
Favorites -> Favorites : findMatches()
alt matches found
    Favorites --> User : "🔎 Results:\n[items]"
else no matches
    Favorites --> User : "❌ No matches found"
end
deactivate Favorites

@enduml